{#-
 # content array
 # defaultLocale string
 # seo array
 # shadowBaseLocale string
 # urls array
-#}

{#- merge seo data with _seo from attributes for custom urls -#}
{% set seo = seo|default([])|merge(app.request.attributes.get('_seo', [])|default([])) %}

{#- fallback to content title when no seo title is set -#}
{% set seoTitle = seo.title|default(content.title|default()) %}
{% set seoDescription = seo.description|default() %}
{% set seoKeywords = seo.keywords|default() %}

{% set seoRobots = '' %}
{%- if seo.noIndex|default(false) -%}
{% set seoRobots = seoRobots ~ 'noIndex' -%}
{%- else -%}
{% set seoRobots = seoRobots ~ 'index' -%}
{%- endif -%}
{%- if seo.noFollow|default(false) -%}
{% set seoRobots = seoRobots ~ ',noFollow' -%}
{%- else -%}
{% set seoRobots = seoRobots ~ ',follow' -%}
{%- endif -%}

{% set seoCanonical = seo.canonicalUrl|default() %}

{%- if not seoCanonical and shadowBaseLocale and urls[shadowBaseLocale]|default() %}
{% set seoCanonical = sulu_content_path(urls[shadowBaseLocale], null, shadowBaseLocale) %}
{%- endif -%}


"title": "{{ seoTitle }}",
"description": "{{ seoDescription }}",
"keywords": "{{ seoKeywords }}",
"robots": "{{ seoRobots }}",
"canonical": "{{ seoCanonical }}"
